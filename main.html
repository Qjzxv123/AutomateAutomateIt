<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Automate It Production Planner</title>
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
	<style>
		body {
			font-family: 'Roboto', Arial, sans-serif;
			background: #181c20;
			color: #f3f3f3;
			margin: 0;
			padding: 0;
		}
		header {
			background: #23272b;
			padding: 1.5rem 2rem;
			display: flex;
			align-items: center;
			justify-content: space-between;
			box-shadow: 0 2px 8px #000a;
		}
		.logo {
			font-size: 2rem;
			font-weight: 700;
			letter-spacing: 2px;
			color: #ffb347;
		}
		.planner-container {
			max-width: 1200px;
			margin: 2rem auto;
			background: #23272b;
			border-radius: 16px;
			box-shadow: 0 4px 24px #0006;
			padding: 2rem;
		}
		.input-section {
			display: flex;
			gap: 1rem;
			align-items: center;
			margin-bottom: 2rem;
		}
		.input-section select, .input-section input {
			padding: 0.5rem 1rem;
			border-radius: 8px;
			border: none;
			font-size: 1rem;
		}
		.input-section button {
			background: #ffb347;
			color: #23272b;
			border: none;
			border-radius: 8px;
			padding: 0.5rem 1.5rem;
			font-size: 1rem;
			font-weight: 700;
			cursor: pointer;
			transition: background 0.2s;
		}
		.input-section button:hover {
			background: #ffd580;
		}
		.production-plan {
			background: #1a1e22;
			border-radius: 12px;
			padding: 2rem;
			min-height: 300px;
			box-shadow: 0 2px 8px #0004;
		}
		.placeholder-graph {
			color: #888;
			text-align: center;
			margin-top: 4rem;
			font-size: 1.2rem;
		}
	</style>
</head>
<body>
	<header>
		<div class="logo">Automate It Planner</div>
		<div>Inspired by satisfactory-calculator.com</div>
	</header>
	<div class="planner-container">
		<div class="input-section">
			<select id="item-select">
				<option value="">Select Item</option>
			</select>
			<input id="rate-input" type="number" min="0.1" step="0.1" placeholder="Rate per minute">
			<label for="optimize-select" style="margin-left:1rem;">Optimize by:</label>
			<select id="optimize-select">
				<option value="space">Space</option>
				<option value="power">Power</option>
				<option value="buildings">Buildings</option>
			</select>
				<button id="edit-available-items-btn" style="margin-left:1rem;">Set Available Items</button>

				<!-- Modal for available items -->
					<div id="available-items-modal" style="display:none;position:fixed;z-index:1000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;">
						<div style="background:#23272b;padding:2rem 2.5rem;border-radius:12px;min-width:350px;max-width:90vw;max-height:80vh;overflow-y:auto;">
						<h2 style="margin-top:0;">Set Available Items</h2>
						<form id="available-items-form">
							<table id="available-items-table" style="width:100%;margin-bottom:1rem;">
								<thead><tr><th>Item</th><th>Amount</th><th></th></tr></thead>
								<tbody></tbody>
							</table>
							<button type="button" id="add-available-item-row">Add New Item</button>
							<div style="margin-top:1.5rem;text-align:right;">
								<button type="button" id="close-available-items-modal" style="margin-right:1rem;">Cancel</button>
								<button type="submit">Save</button>
							</div>
						</form>
					</div>
				</div>
			<button id="calculate-btn">Calculate</button>
		</div>
		<div class="production-plan" id="production-plan">
			<div style="display: flex; flex-direction: row; gap: 2rem;">
				<div style="flex: 1; min-width: 350px;">
					<div class="placeholder-graph">
						Production plan will appear here as a tree/graph.<br>
						(Icons, rates, and buildings will be shown)
					</div>
					<div id="plan-tree-html"></div>
				</div>
				<div style="flex: 2; min-width: 400px;">
					<div id="network-graph" style="width:100%;height:500px;background:#222;border-radius:8px;"></div>
				</div>
			</div>
		</div>
		<!-- Vis Network CDN -->
		<script type="text/javascript" src="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.js"></script>
		<link href="https://unpkg.com/vis-network@9.1.2/dist/vis-network.min.css" rel="stylesheet" type="text/css" />
		<script>
		// --- Data structures for Automate It ---
	const items = {
		AdvSolarModuleWithPanel: { name: 'Advanced Solar Module With Panel', icon: 't_icon_advsolarmodulewithpanel.png', type: 'solid' },
		AdvancedHeatSink: { name: 'Advanced Heat Sink', icon: 't_icon_advancedheatsink.png', type: 'solid' },
		AdvancedOpticalInverter: { name: 'Advanced Optical Inverter', icon: 't_icon_advancedopticalinverter.png', type: 'solid' },
		AdvancedSolarModule: { name: 'Advanced Solar Module', icon: 't_icon_advancedsolarmodule.png', type: 'solid' },
		AdvancedSolarTransmitter: { name: 'Advanced Solar Transmitter', icon: 't_icon_advancedsolartransmitter.png', type: 'solid' },
		AlkalineCrystallizationAgent: { name: 'Alkaline Crystallization Agent', icon: 't_icon_alkalinecrystallizationagent.png', type: 'solid' },
		AlloySuspendedMagneticFieldGenerator: { name: 'Alloy Suspended Magnetic Field Generator', icon: 't_icon_alloysuspendedmagneticfieldgenerator.png', type: 'solid' }, 
		Aluminum: { name: 'Aluminum', icon: 't_icon_aluminum.png', type: 'solid' },
		AluminumBar: { name: 'Aluminum Bar', icon: 't_icon_aluminumbar.png', type: 'solid' },
		AluminumCoating: { name: 'Aluminum Coating', icon: 't_icon_aluminumcoating.png', type: 'solid' },
		AluminumFrame: { name: 'Aluminum Frame', icon: 't_icon_aluminumframe.png', type: 'solid' },
		AluminumIngot: { name: 'AluminumI ngot', icon: 't_icon_aluminumingot.png', type: 'solid' },
		AluminumProfile: { name: 'Aluminum Profile', icon: 't_icon_aluminumprofile.png', type: 'solid' },
		AstralEtherLens: { name: 'Astral Ether Lens', icon: 't_icon_astraletherlens.png', type: 'solid' },
		AstralInfusedProcessingCrystal: { name: 'Astral Infused Processing Crystal', icon: 't_icon_astralinfusedprocessingcrystal.png', type: 'solid' },
		AstralPowerCore: { name: 'Astral Power Core', icon: 't_icon_astralpowercore.png', type: 'solid' },
		AstralShadowModule: { name: 'Astral Shadow Module', icon: 't_icon_astralshadowmodule.png', type: 'solid' },
		AstralShadowOcilator: { name: 'Astral Shadow Ocilator', icon: 't_icon_astralshadowocilator.png', type: 'solid' },
		AstralSignalTransponder: { name: 'Astral Signal Transponder', icon: 't_icon_astralsignaltransponder.png', type: 'solid' },
		AstralVoidEnergyCascade: { name: 'Astral Void Energy Cascade', icon: 't_icon_astralvoidenergycascade.png', type: 'solid' },
		Astralite: { name: '', icon: 't_icon_astralite.png', type: 'solid' },
		AstraliteFragment: { name: '', icon: 't_icon_astralitefragment.png', type: 'solid' },
		AstraliteInfusedCore: { name: '', icon: 't_icon_astraliteinfusedcore.png', type: 'solid' },
		AstraliteReinforcementPanel: { name: '', icon: 't_icon_astralitereinforcementpanel.png', type: 'solid' },
		AstraliteSingularityDrive: { name: '', icon: 't_icon_astralitesingularitydrive.png', type: 'solid' },
		AutoIrrigation: { name: '', icon: 't_icon_autoirrigation.png', type: 'solid' },
		AutomatedSingularityConverter: { name: '', icon: 't_icon_automatedsingularityconverter.png', type: 'solid' },
		AutomaticControlPanel: { name: '', icon: 't_icon_automaticcontrolpanel.png', type: 'solid' },
		AutomaticGreenhouse: { name: '', icon: 't_icon_automaticgreenhouse.png', type: 'solid' },
		Barrel: { name: '', icon: 't_icon_barrel.png', type: 'solid' },
		BarrelOfAstralShadow: { name: '', icon: 't_icon_barrelofastralshadow.png', type: 'solid' },
		Basalt: { name: '', icon: 't_icon_basalt.png', type: 'solid' },
		BasaltComposite: { name: '', icon: 't_icon_basaltcomposite.png', type: 'solid' },
		BasaltHeatSink: { name: '', icon: 't_icon_basaltheatsink.png', type: 'solid' },
		BioChemicalExtractionUnit: { name: '', icon: 't_icon_biochemicalextractionunit.png', type: 'solid' },
		BioeletricExtractionCore: { name: '', icon: 't_icon_bioeletricextractioncore.png', type: 'solid' },
		Biomass: { name: '', icon: 't_icon_biomass.png', type: 'solid' },
		Bitumen: { name: '', icon: 't_icon_bitumen.png', type: 'solid' },
		CelestialFluxEngine: { name: '', icon: 't_icon_celestialfluxengine.png', type: 'solid' },
		ChromiumCrystal: { name: '', icon: 't_icon_chromiumcrystal.png', type: 'solid' },
		ChromiumCrystalCore: { name: '', icon: 't_icon_chromiumcrystalcore.png', type: 'solid' },
		ChromiumCrystalWafer: { name: '', icon: 't_icon_chromiumcrystalwafer.png', type: 'solid' },
		ChromiumLuminaryMatrix: { name: '', icon: 't_icon_chromiumluminarymatrix.png', type: 'solid' },
		ChronoReactorCoil: { name: '', icon: 't_icon_chronoreactorcoil.png', type: 'solid' },
		ChronoResonanceMatrix: { name: '', icon: 't_icon_chronoresonancematrix.png', type: 'solid' },
		ChronoShadowPlate: { name: '', icon: 't_icon_chronoshadowplate.png', type: 'solid' },
		CircuitMemoryArray: { name: '', icon: 't_icon_circuitmemoryarray.png', type: 'solid' },
		Coal: { name: '', icon: 't_icon_coal.png', type: 'solid' },
		CompressedAlloyQuantumSandwich: { name: '', icon: 't_icon_compressedalloyquantumsandwich.png', type: 'solid' },
		CompressedBasalt: { name: '', icon: 't_icon_compressedbasalt.png', type: 'solid' },
		CompressedShadowOpal: { name: '', icon: 't_icon_compressedshadowopal.png', type: 'solid' },
		Concrete: { name: '', icon: 't_icon_concrete.png', type: 'solid' },
		ConcreteBlock: { name: '', icon: 't_icon_concreteblock.png', type: 'solid' },
		CondensedEtherPulseEngine: { name: '', icon: 't_icon_condensedetherpulseengine.png', type: 'solid' },
		Copper: { name: '', icon: 't_icon_copper.png', type: 'solid' },
		CopperBars: { name: '', icon: 't_icon_copperbars.png', type: 'solid' },
		CopperFilament: { name: '', icon: 't_icon_copperfilament.png', type: 'solid' },
		CopperPipe: { name: '', icon: 't_icon_copperpipe.png', type: 'solid' },
		CosmicGallon: { name: '', icon: 't_icon_cosmicgallon.png', type: 'solid' },
		CryogenicFuelCell: { name: '', icon: 't_icon_cryogenicfuelcell.png', type: 'solid' },
		CrystalPressureModulator: { name: '', icon: 't_icon_crystalpressuremodulator.png', type: 'solid' },
		CrystallineSynchronizationPlate: { name: '', icon: 't_icon_crystallinesynchronizationplate.png', type: 'solid' },
		CrystallizedDiamondCore: { name: '', icon: 't_icon_crystallizeddiamondcore.png', type: 'solid' },
		DeepCoreSensorNode: { name: '', icon: 't_icon_deepcoresensornode.png', type: 'solid' },
		Diamond: { name: '', icon: 't_icon_diamond.png', type: 'solid' },
		DiamondDust: { name: '', icon: 't_icon_diamonddust.png', type: 'solid' },
		DiamondSingularityCore: { name: '', icon: 't_icon_diamondsingularitycore.png', type: 'solid' },
		EnergizedCrystalLens: { name: '', icon: 't_icon_energizedcrystallens.png', type: 'solid' },
		EnrichedUraniumPellet: { name: '', icon: 't_icon_enricheduraniumpellet.png', type: 'solid' },
		EtherGuidedFlowRod: { name: '', icon: 't_icon_etherguidedflowrod.png', type: 'solid' },
		EtherQuartz: { name: '', icon: 't_icon_etherquartz.png', type: 'solid' },
		EtherealChromiumEngine: { name: '', icon: 't_icon_etherealchromiumengine.png', type: 'solid' },
		EtherealPrismaticSphere: { name: '', icon: 't_icon_etherealprismaticsphere.png', type: 'solid' },
		EthericControlModule: { name: '', icon: 't_icon_ethericcontrolmodule.png', type: 'solid' },
		EtheriumShadowPlate: { name: '', icon: 't_icon_etheriumshadowplate.png', type: 'solid' },
		FiltredWaterGallon: { name: '', icon: 't_icon_filtredwatergallon.png', type: 'solid' },
		Fluorite: { name: '', icon: 't_icon_fluorite.png', type: 'solid' },
		FractalProcessingPrism: { name: '', icon: 't_icon_fractalprocessingprism.png', type: 'solid' },
		FracturedSingularityMesh: { name: '', icon: 't_icon_fracturedsingularitymesh.png', type: 'solid' },
		FusionFieldStabilizer: { name: '', icon: 't_icon_fusionfieldstabilizer.png', type: 'solid' },
		FusionFuelRod: { name: '', icon: 't_icon_fusionfuelrod.png', type: 'solid' },
		Gallon: { name: '', icon: 't_icon_gallon.png', type: 'solid' },
		Glass: { name: '', icon: 't_icon_glass.png', type: 'solid' },
		GravitationalCoreProcessor: { name: '', icon: 't_icon_gravitationalcoreprocessor.png', type: 'solid' },
		HVTransformer: { name: '', icon: 't_icon_hvtransformer.png', type: 'solid' },
		HardenedQuartzPlate: { name: '', icon: 't_icon_hardenedquartzplate.png', type: 'solid' },
		HyperconductiveProcessingUnit: { name: '', icon: 't_icon_hyperconductiveprocessingunit.png', type: 'solid' },
		IonFluxBeamEmitter: { name: '', icon: 't_icon_ionfluxbeamemitter.png', type: 'solid' },
		Iridium: { name: '', icon: 't_icon_iridium.png', type: 'solid' },
		IridiumCatalyst: { name: '', icon: 't_icon_iridiumcatalyst.png', type: 'solid' },
		IridiumPlatedCable: { name: '', icon: 't_icon_iridiumplatedcable.png', type: 'solid' },
		IridiumReflector: { name: '', icon: 't_icon_iridiumreflector.png', type: 'solid' },
		Iron: { name: '', icon: 't_icon_iron.png', type: 'solid' },
		IronBar: { name: '', icon: 't_icon_ironbar.png', type: 'solid' },
		IronIngot: { name: '', icon: 't_icon_ironingot.png', type: 'solid' },
		IronPipe: { name: '', icon: 't_icon_ironpipe.png', type: 'solid' },
		IrrigationSystem: { name: '', icon: 't_icon_irrigationsystem.png', type: 'solid' },
		LVTransformer: { name: '', icon: 't_icon_lvtransformer.png', type: 'solid' },
		LatticeEncodedMemoryBank: { name: '', icon: 't_icon_latticeencodedmemorybank.png', type: 'solid' },
		LatticeReinforcedConduit: { name: '', icon: 't_icon_latticereinforcedconduit.png', type: 'solid' },
		LuminaryCrystalCore: { name: '', icon: 't_icon_luminarycrystalcore.png', type: 'solid' },
		MagneticCoolingRegulator: { name: '', icon: 't_icon_magneticcoolingregulator.png', type: 'solid' },
		MagneticIndunctionCoil: { name: '', icon: 't_icon_magneticindunctioncoil.png', type: 'solid' },
		MagneticNickelRod: { name: '', icon: 't_icon_magneticnickelrod.png', type: 'solid' },
		MultiphaseAlloyReactor: { name: '', icon: 't_icon_multiphasealloyreactor.png', type: 'solid' },
		NanoInsulatedWiringSet: { name: '', icon: 't_icon_nanoinsulatedwiringset.png', type: 'solid' },
		NanoMagneticFlowRegulator: { name: '', icon: 't_icon_nanomagneticflowregulator.png', type: 'solid' },
		NebulaInfusedOpal: { name: '', icon: 't_icon_nebulainfusedopal.png', type: 'solid' },
		Nebulite: { name: '', icon: 't_icon_nebulite.png', type: 'solid' },
		NebulitePrism: { name: '', icon: 't_icon_nebuliteprism.png', type: 'solid' },
		NeuralControlInterface: { name: '', icon: 't_icon_neuralcontrolinterface.png', type: 'solid' },
		NeuralPhaseThread: { name: '', icon: 't_icon_neuralphasethread.png', type: 'solid' },
		NeutronFluxGenerator: { name: '', icon: 't_icon_neutronfluxgenerator.png', type: 'solid' },
		NeutronStabilizedCore: { name: '', icon: 't_icon_neutronstabilizedcore.png', type: 'solid' },
		NeutroniumStabilizationBrace: { name: '', icon: 't_icon_neutroniumstabilizationbrace.png', type: 'solid' },
		NeutronizedCoolingPillar: { name: '', icon: 't_icon_neutronizedcoolingpillar.png', type: 'solid' },
		Nickel: { name: '', icon: 't_icon_nickel.png', type: 'solid' },
		NickelInfusedWire: { name: '', icon: 't_icon_nickelinfusedwire.png', type: 'solid' },
		OminidirectionalHeatFilter: { name: '', icon: 't_icon_ominidirectionalheatfilter.png', type: 'solid' },
		OmniFusedRelayAmplifier: { name: '', icon: 't_icon_omnifusedrelayamplifier.png', type: 'solid' },
		OmniversalEnergyNexus: { name: '', icon: 't_icon_omniversalenergynexus.png', type: 'solid' },
		Osmium: { name: '', icon: 't_icon_osmium.png', type: 'solid' },
		OsmiumFilament: { name: '', icon: 't_icon_osmiumfilament.png', type: 'solid' },
		OsmiumReinforcement: { name: '', icon: 't_icon_osmiumreinforcement.png', type: 'solid' },
		PhaseCompressionArray: { name: '', icon: 't_icon_phasecompressionarray.png', type: 'solid' },
		PhaseSyncedRelayCircuit: { name: '', icon: 't_icon_phasesyncedrelaycircuit.png', type: 'solid' },
		PhotonicDiamondLayer: { name: '', icon: 't_icon_photonicdiamondlayer.png', type: 'solid' },
		PlasmaConductorArray: { name: '', icon: 't_icon_plasmaconductorarray.png', type: 'solid' },
		Plastic: { name: '', icon: 't_icon_plastic.png', type: 'solid' },
		PlasticFrame: { name: '', icon: 't_icon_plasticframe.png', type: 'solid' },
		PlasticMold: { name: '', icon: 't_icon_plasticmold.png', type: 'solid' },
		Platinum: { name: '', icon: 't_icon_platinum.png', type: 'solid' },
		PlatinumCatalyst: { name: '', icon: 't_icon_platinumcatalyst.png', type: 'solid' },
		PlatinumCoil: { name: '', icon: 't_icon_platinumcoil.png', type: 'solid' },
		PlatinumPrecisionGear: { name: '', icon: 't_icon_platinumprecisiongear.png', type: 'solid' },
		PlatonicMemoryCore: { name: '', icon: 't_icon_platonicmemorycore.png', type: 'solid' },
		PolycrystallineSilicon: { name: '', icon: 't_icon_polycrystallinesilicon.png', type: 'solid' },
		PowerCable: { name: '', icon: 't_icon_powercable.png', type: 'solid' },
		PulseEnergyMatrix: { name: '', icon: 't_icon_pulseenergymatrix.png', type: 'solid' },
		QuantumCooledReactorCasing: { name: '', icon: 't_icon_quantumcooledreactorcasing.png', type: 'solid' },
		QuantumDataCompressor: { name: '', icon: 't_icon_quantumdatacompressor.png', type: 'solid' },
		QuantumNebuliteSphere: { name: '', icon: 't_icon_quantumnebulitesphere.png', type: 'solid' },
		QuantumQuartzCore: { name: '', icon: 't_icon_quantumquartzcore.png', type: 'solid' },
		QuantumResonantLensCore: { name: '', icon: 't_icon_quantumresonantlenscore.png', type: 'solid' },
		QuantumSignalRelay: { name: '', icon: 't_icon_quantumsignalrelay.png', type: 'solid' },
		QuantumStabilizedAlloy: { name: '', icon: 't_icon_quantumstabilizedalloy.png', type: 'solid' },
		Quartz: { name: '', icon: 't_icon_quartz.png', type: 'solid' },
		QuartzInsulatedGlass: { name: '', icon: 't_icon_quartzinsulatedglass.png', type: 'solid' },
		RadiantCrystalAmplifier: { name: '', icon: 't_icon_radiantcrystalamplifier.png', type: 'solid' },
		RadiationShieldingPanel: { name: '', icon: 't_icon_radiationshieldingpanel.png', type: 'solid' },
		RailwayTrack: { name: '', icon: 't_icon_railwaytrack.png', type: 'solid' },
		Railwayline: { name: '', icon: 't_icon_railwayline.png', type: 'solid' },
		ReactiveAlloyCasing: { name: '', icon: 't_icon_reactivealloycasing.png', type: 'solid' },
		ReactiveFlowManipulator: { name: '', icon: 't_icon_reactiveflowmanipulator.png', type: 'solid' },
		RefinedEtherQuartz: { name: '', icon: 't_icon_refinedetherquartz.png', type: 'solid' },
		RefinedUraniumRod: { name: '', icon: 't_icon_refineduraniumrod.png', type: 'solid' },
		ReinforcedAluminumBeams: { name: '', icon: 't_icon_reinforcedaluminumbeams.png', type: 'solid' },
		ReinforcedConcrete: { name: '', icon: 't_icon_reinforcedconcrete.png', type: 'solid' },
		ReinforcedGlassScreen: { name: '', icon: 't_icon_reinforcedglassscreen.png', type: 'solid' },
		ReinforcedNail: { name: '', icon: 't_icon_reinforcednail.png', type: 'solid' },
		ReinforcedSteelPlate: { name: '', icon: 't_icon_reinforcedsteelplate.png', type: 'solid' },
		Ruby: { name: '', icon: 't_icon_ruby.png', type: 'solid' },
		RubyCircuitInlay: { name: '', icon: 't_icon_rubycircuitinlay.png', type: 'solid' },
		RubyLens: { name: '', icon: 't_icon_rubylens.png', type: 'solid' },
		Salt: { name: '', icon: 't_icon_salt.png', type: 'solid' },
		Saphire: { name: '', icon: 't_icon_saphire.png', type: 'solid' },
		SapphireConduit: { name: '', icon: 't_icon_sapphireconduit.png', type: 'solid' },
		SapphireEnergyCell: { name: '', icon: 't_icon_sapphireenergycell.png', type: 'solid' },
		ShadowNebulaCore: { name: '', icon: 't_icon_shadownebulacore.png', type: 'solid' },
		ShadowOpal: { name: '', icon: 't_icon_shadowopal.png', type: 'solid' },
		ShadowOpalShard: { name: '', icon: 't_icon_shadowopalshard.png', type: 'solid' },
		ShadowglassCapacitor: { name: '', icon: 't_icon_shadowglasscapacitor.png', type: 'solid' },
		Silicon: { name: '', icon: 't_icon_silicon.png', type: 'solid' },
		SiliconDiode: { name: '', icon: 't_icon_silicondiode.png', type: 'solid' },
		SiliconPlate: { name: '', icon: 't_icon_siliconplate.png', type: 'solid' },
		Singularity1: { name: '', icon: 't_icon_singularity1.png', type: 'solid' },
		Singularity2: { name: '', icon: 't_icon_singularity2.png', type: 'solid' },
		Singularity3: { name: '', icon: 't_icon_singularity3.png', type: 'solid' },
		Singularity4: { name: '', icon: 't_icon_singularity4.png', type: 'solid' },
		Singularity5: { name: '', icon: 't_icon_singularity5.png', type: 'solid' },
		SingularityInfusedActuator: { name: '', icon: 't_icon_singularityinfusedactuator.png', type: 'solid' },
		SolarCell: { name: '', icon: 't_icon_solarcell.png', type: 'solid' },
		SolarControlPanel: { name: '', icon: 't_icon_solarcontrolpanel.png', type: 'solid' },
		SolarLantern: { name: '', icon: 't_icon_solarlantern.png', type: 'solid' },
		SolarLightingModule: { name: '', icon: 't_icon_solarlightingmodule.png', type: 'solid' },
		SolarLightingTower: { name: '', icon: 't_icon_solarlightingtower.png', type: 'solid' },
		SolarPanel: { name: '', icon: 't_icon_solarpanel.png', type: 'solid' },
		Steel: { name: '', icon: 't_icon_steel.png', type: 'solid' },
		SteelSheets: { name: '', icon: 't_icon_steelsheets.png', type: 'solid' },
		StellarChromiumModule: { name: '', icon: 't_icon_stellarchromiummodule.png', type: 'solid' },
		Stone: { name: '', icon: 't_icon_stone.png', type: 'solid' },
		StoneBlock: { name: '', icon: 't_icon_stoneblock.png', type: 'solid' },
		StructuralCable: { name: '', icon: 't_icon_structuralcable.png', type: 'solid' },
		Substrate: { name: '', icon: 't_icon_substrate.png', type: 'solid' },
		Sulfur: { name: '', icon: 't_icon_sulfur.png', type: 'solid' },
		SupercompressedPhaseAlloy: { name: '', icon: 't_icon_supercompressedphasealloy.png', type: 'solid' },
		SuperluminalRelayCore: { name: '', icon: 't_icon_superluminalrelaycore.png', type: 'solid' },
		SupportBeams: { name: '', icon: 't_icon_supportbeams.png', type: 'solid' },
		SynapticFiberCoil: { name: '', icon: 't_icon_synapticfibercoil.png', type: 'solid' },
		SyntheticCircuitSubbrain: { name: '', icon: 't_icon_syntheticcircuitsubbrain.png', type: 'solid' },
		TemporalDivergenceArray: { name: '', icon: 't_icon_temporaldivergencearray.png', type: 'solid' },
		TemporalPrismCircuit: { name: '', icon: 't_icon_temporalprismcircuit.png', type: 'solid' },
		TemporalRefractionInverter: { name: '', icon: 't_icon_temporalrefractioninverter.png', type: 'solid' },
		ThermoeletricInterfaceChip: { name: '', icon: 't_icon_thermoeletricinterfacechip.png', type: 'solid' },
		TitaniuMesh: { name: '', icon: 't_icon_titaniumesh.png', type: 'solid' },
		Titanium: { name: '', icon: 't_icon_titanium.png', type: 'solid' },
		TitaniumAlloyPlate: { name: '', icon: 't_icon_titaniumalloyplate.png', type: 'solid' },
		TitaniumInfusionEngine: { name: '', icon: 't_icon_titaniuminfusionengine.png', type: 'solid' },
		TitaniumLattice: { name: '', icon: 't_icon_titaniumlattice.png', type: 'solid' },
		TriCrystalFusionNode: { name: '', icon: 't_icon_tricrystalfusionnode.png', type: 'solid' },
		TunedQuantumProcessor: { name: '', icon: 't_icon_tunedquantumprocessor.png', type: 'solid' },
		Uranium: { name: '', icon: 't_icon_uranium.png', type: 'solid' },
		UraniumIonCell: { name: '', icon: 't_icon_uraniumioncell.png', type: 'solid' },
		VoidNebulaReactor: { name: '', icon: 't_icon_voidnebulareactor.png', type: 'solid' },
		VoidStabilizedContainmentRing: { name: '', icon: 't_icon_voidstabilizedcontainmentring.png', type: 'solid' },
		VoidglassFocusingArray: { name: '', icon: 't_icon_voidglassfocusingarray.png', type: 'solid' },
		VoidglassImplosionDamper: { name: '', icon: 't_icon_voidglassimplosiondamper.png', type: 'solid' },
		WaterFiltrationDevice: { name: '', icon: 't_icon_waterfiltrationdevice.png', type: 'solid' },
		Wood: { name: '', icon: 't_icon_wood.png', type: 'solid' },
		WoodBoard: { name: '', icon: 't_icon_woodboard.png', type: 'solid' },
		WoodPlank: { name: '', icon: 't_icon_woodplank.png', type: 'solid' },
		Zinc: { name: '', icon: 't_icon_zinc.png', type: 'solid' },
		ZincCarbonMatrix: { name: '', icon: 't_icon_zinccarbonmatrix.png', type: 'solid' },
		ZincPlating: { name: '', icon: 't_icon_zincplating.png', type: 'solid' },
		Brine: { name: '', icon: 't_icon_brine.png', type: 'nonsolid' },
		Chloride: { name: '', icon: 't_icon_chloride.png', type: 'nonsolid' },
		ChromiumSuspension: { name: '', icon: 't_icon_chromiumsuspension.png', type: 'nonsolid' },
		ChronoCatalystGel: { name: '', icon: 't_icon_chronocatalystgel.png', type: 'nonsolid' },
		CompressedAstralShadow: { name: '', icon: 't_icon_compressedastralshadow.png', type: 'nonsolid' },
		CompressedTransformationSingularity: { name: '', icon: 't_icon_compressedtransformationsingularity.png', type: 'nonsolid' },
		CondensedHelium3: { name: '', icon: 't_icon_condensedhelium3.png', type: 'nonsolid' },
		CooperFluxVapor: { name: '', icon: 't_icon_cooperfluxvapor.png', type: 'nonsolid' },
		CopperFluxSuspension: { name: '', icon: 't_icon_copperfluxsuspension.png', type: 'nonsolid' },
		CryoalkalineSolution: { name: '', icon: 't_icon_cryoalkalinesolution.png', type: 'nonsolid' },
		Deuterium: { name: '', icon: 't_icon_deuterium.png', type: 'nonsolid' },
		DiamondSlurry: { name: '', icon: 't_icon_diamondslurry.png', type: 'nonsolid' },
		EthericBinderGel: { name: '', icon: 't_icon_ethericbindergel.png', type: 'nonsolid' },
		Ethylene: { name: '', icon: 't_icon_ethylene.png', type: 'nonsolid' },
		FiltratedWater: { name: '', icon: 't_icon_filtratedwater.png', type: 'nonsolid' },
		HeavyOil: { name: '', icon: 't_icon_heavyoil.png', type: 'nonsolid' },
		HeavyWater: { name: '', icon: 't_icon_heavywater.png', type: 'nonsolid' },
		Helium3: { name: '', icon: 't_icon_helium3.png', type: 'nonsolid' },
		HydrofluoricAcid: { name: '', icon: 't_icon_hydrofluoricacid.png', type: 'nonsolid' },
		Hydrogen: { name: '', icon: 't_icon_hydrogen.png', type: 'nonsolid' },
		HydrogenChloride: { name: '', icon: 't_icon_hydrogenchloride.png', type: 'nonsolid' },
		IonizedHydrogen: { name: '', icon: 't_icon_ionizedhydrogen.png', type: 'nonsolid' },
		IridiumSolution: { name: '', icon: 't_icon_iridiumsolution.png', type: 'nonsolid' },
		LightOil: { name: '', icon: 't_icon_lightoil.png', type: 'nonsolid' },
		LiquidChloride: { name: '', icon: 't_icon_liquidchloride.png', type: 'nonsolid' },
		LiquidDeuterium: { name: '', icon: 't_icon_liquiddeuterium.png', type: 'nonsolid' },
		LiquidHydrofluoricAcid: { name: '', icon: 't_icon_liquidhydrofluoricacid.png', type: 'nonsolid' },
		LiquidHydrogen: { name: '', icon: 't_icon_liquidhydrogen.png', type: 'nonsolid' },
		LiquidHydrogenChloride: { name: '', icon: 't_icon_liquidhydrogenchloride.png', type: 'nonsolid' },
		LiquidNitrogen: { name: '', icon: 't_icon_liquidnitrogen.png', type: 'nonsolid' },
		LiquidOxygen: { name: '', icon: 't_icon_liquidoxygen.png', type: 'nonsolid' },
		LiquidTransformationSingularity: { name: '', icon: 't_icon_liquidtransformationsingularity.png', type: 'nonsolid' },        
		MeltedAstralShadow: { name: '', icon: 't_icon_meltedastralshadow.png', type: 'nonsolid' },
		MeltedWaterFilter: { name: '', icon: 't_icon_meltedwaterfilter.png', type: 'nonsolid' },
		Nitrogen: { name: '', icon: 't_icon_nitrogen.png', type: 'nonsolid' },
		Oil: { name: '', icon: 't_icon_oil.png', type: 'nonsolid' },
		Oxygen: { name: '', icon: 't_icon_oxygen.png', type: 'nonsolid' },
		PlasmaArcEnergy: { name: '', icon: 't_icon_plasmaarcenergy.png', type: 'nonsolid' },
		QuantumEnergySolution: { name: '', icon: 't_icon_quantumenergysolution.png', type: 'nonsolid' },
		QuantumPlasma: { name: '', icon: 't_icon_quantumplasma.png', type: 'nonsolid' },
		Sodium: { name: '', icon: 't_icon_sodium.png', type: 'nonsolid' },
		SodiumHydroxide: { name: '', icon: 't_icon_sodiumhydroxide.png', type: 'nonsolid' },
		StabilizedIridiumMatrix: { name: '', icon: 't_icon_stabilizediridiummatrix.png', type: 'nonsolid' },
		SulfurDioxide: { name: '', icon: 't_icon_sulfurdioxide.png', type: 'nonsolid' },
		SulfurTrioxide: { name: '', icon: 't_icon_sulfurtrioxide.png', type: 'nonsolid' },
		SulfuricAcid: { name: '', icon: 't_icon_sulfuricacid.png', type: 'nonsolid' },
		SuperheatedPlasmaCore: { name: '', icon: 't_icon_superheatedplasmacore.png', type: 'nonsolid' },
		TemporalCircuitSlurry: { name: '', icon: 't_icon_temporalcircuitslurry.png', type: 'nonsolid' },
		UraniumSuspension: { name: '', icon: 't_icon_uraniumsuspension.png', type: 'nonsolid' },
		Water: { name: '', icon: 't_icon_water.png', type: 'nonsolid' },
		WaterSteam: { name: '', icon: 't_icon_watersteam.png', type: 'nonsolid' },
		ZincSolution: { name: '', icon: 't_icon_zincsolution.png', type: 'nonsolid' },
		catalyzedcarbonbinder: { name: '', icon: 't_icon_catalyzedcarbonbinder.png', type: 'nonsolid' },
		etherealcoolant: { name: '', icon: 't_icon_etherealcoolant.png', type: 'nonsolid' },
		hypercooledsuperfluid: { name: '', icon: 't_icon_hypercooledsuperfluid.png', type: 'nonsolid' },
		liquidcarbon: { name: '', icon: 't_icon_liquidcarbon.png', type: 'nonsolid' },
		plasmalinkedcatalystgel: { name: '', icon: 't_icon_plasmalinkedcatalystgel.png', type: 'nonsolid' },
		reinforceduraniumsuspension: { name: '', icon: 't_icon_reinforceduraniumsuspension.png', type: 'nonsolid' },
		shadowopalsolution: { name: '', icon: 't_icon_shadowopalsolution.png', type: 'nonsolid' },
		stabilizedethericalkalinebase: { name: '', icon: 't_icon_stabilizedethericalkalinebase.png', type: 'nonsolid' },
		stabilizedopalslurry: { name: '', icon: 't_icon_stabilizedopalslurry.png', type: 'nonsolid' },
		voidreactionslurry: { name: '', icon: 't_icon_voidreactionslurry.png', type: 'nonsolid' },
		voidstabilizer: { name: '', icon: 't_icon_voidstabilizer.png', type: 'nonsolid' },
	}
	const buildings = {
		press: { name: 'Press', power: 10, space: 10 },
		furnace: { name: 'Furnace', power: 10, space: 10 },
		cutter: { name: 'Cutter', power: 8, space: 2 },
		welder: { name: 'Welder', power: 15, space: 17 },
		advanced_furnace: { name: 'Advanced Furnace', power: 20, space: 76 },
		advanced_cutter: { name: 'Advanced Cutter', power: 15, space: 24 },
		advanced_press: { name: 'Advanced Press', power: 20, space: 23 },
		manufacturer: { name: 'Manufacturer', power: 15, space: 9 },
        bifluxor: { name: 'Bifluxor', power: 30, space: 48 },
		chemical_infuser: { name: 'Chemical Infuser', power: 45, space: 80 },
		storage_packing: { name: 'Storage Packing', power: 50, space: 100 },
		dissolution_chamber: { name: 'Dissolution Chamber', power: 25, space: 22 },
		distilation_column: { name: 'Distilation Column', power: 30, space: 22 },
		};
	const recipes = [
            {
                name: "Plastic Molds (Dissolution Chamber)",
                building: "dissolution_chamber",
                inputs: [
                    { item: "plastic", rate: 120 },
                    { item: "liquid_chloride", rate: 60 }
                ],
                outputs: [
                    { item: "plastic_mold", rate: 60 }
                ]
            },
            {
                name: "Quantum Signal Relay (Copper Filaments)",
                building: "manufacturer",
                inputs: [
                    { item: "plastic_mold", rate: 120 },
                    { item: "copper_filament", rate: 60 },
                    { item: "osmium_reinforcement", rate: 60 }
                ],
                outputs: [
                    { item: "quantum_signal_relay", rate: 30 }
                ]
            },
            {
                name: "Quantum Signal Relay (Steel Sheets)",
                building: "manufacturer",
                inputs: [
                    { item: "plastic_mold", rate: 120 },
                    { item: "steel_sheet", rate: 60 },
                    { item: "osmium_reinforcement", rate: 60 }
                ],
                outputs: [
                    { item: "quantum_signal_relay", rate: 30 }
                ]
            },
            
            {
                name: 'Condensed Helium-3 (Bifluxor)',
                building: 'bifluxor',
                inputs: [ { item: 'helium_3'} ],
                outputs: [ { item: 'condensed_helium_3'} ],
            },
            {
                name: 'Quantum Energy Solution (Chemical Infuser)',
                building: 'chemical_infuser',
                inputs: [ { item: 'superheated_plasma_core'}, { item: 'condensed_helium_3'} ],
                outputs: [ { item: 'quantum_energy_solution'} ],
            },
            {
                name: 'Quantum Plasma (Chemical Infuser)',
                building: 'chemical_infuser',
                inputs: [ { item: 'quantum_energy_solution'}, { item: 'chrono_catalyst_gel'} ],
                outputs: [ { item: 'quantum_plasma'} ],
            },
            {
                name: 'Uranium Ion Cell (Dissolution Chamber, Quantum)',
                building: 'dissolution_chamber',
                inputs: [ { item: 'quantum_plasma'}, { item: 'uranium', rate: 60 } ],
                outputs: [ { item: 'uranium_ion_cell', rate: 20 } ],
            },
			{
				name: 'Superluminal Relay Core (Manufacturer)',
				building: 'manufacturer',
				inputs: [
					{ item: 'pulse_energy_matrix', rate: 60 },
					{ item: 'tuned_quantum_processor', rate: 60 },
					{ item: 'quantum_signal_relay', rate: 60 }
				],
				outputs: [ { item: 'superluminal_relay_core', rate: 60 } ],
			},
			{
				name: 'Fractal Processing Prism (Welder)',
				building: 'welder',
				inputs: [
					{ item: 'superluminal_relay_core', rate: 30 },
					{ item: 'lattice_encoded_memory_bank', rate: 30 }
				],
				outputs: [ { item: 'fractal_processing_prism', rate: 30 } ],
			},
			{
				name: 'Quantum-Resonant Lens Core (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'fractal_processing_prism', rate: 60 },
					{ item: 'voidglass_focusing_array', rate: 120 }
				],
				outputs: [ { item: 'quantum_resonant_lens_core', rate: 60 } ],
			},
			{
				name: 'Galactic Essence Singularity (Welder)',
				building: 'welder',
				inputs: [
					{ item: 'fractured_singularity_mesh', rate: 60 },
					{ item: 'quantum_resonant_lens_core', rate: 60 }
				],
				outputs: [ { item: 'galactic_essence_singularity', rate: 60 } ],
			},
			{
				name: 'Chronium Crystal Core (Advanced Furnace)',
				building: 'advanced_furnace',
				inputs: [ { item: 'chronium_crystal', rate: 30 } ],
				outputs: [ { item: 'chronium_crystal_core', rate: 30 } ],
			},
			{
				name: 'Chronium Crystal Core (Furnace)',
				building: 'furnace',
				inputs: [ { item: 'chronium_crystal', rate: 15 } ],
				outputs: [ { item: 'chronium_crystal_core', rate: 15 } ],
			},
			{
				name: 'Luminary Crystal Core (Welder)',
		    	building: 'welder',
				inputs: [ { item: 'astralite_fragment', rate: 60 }, { item: 'chronium_crystal_core', rate: 30 } ],
				outputs: [ { item: 'luminary_crystal_core', rate: 30 } ],
			},
			{
				name: 'Sapphire Conduit (Welder, Alt)',
				building: 'welder',
				inputs: [ { item: 'sapphire', rate: 120 }, { item: 'luminary_crystal_core', rate: 60 } ],
				outputs: [ { item: 'sapphire_conduit', rate: 60 } ],
			},
			{
				name: 'Pulse Energy Matrix (Storage Packing)',
				building: 'storage_packing',
			    inputs: [ { item: 'sapphire_conduit', rate: 60 }, { item: 'chronium_suspension' } ],
				outputs: [ { item: 'pulse_energy_matrix', rate: 60 } ],
			},
			{
				name: 'Pulse Energy Matrix (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'sapphire_conduit', rate: 60 }, { item: 'ether_quartz', rate: 120 }, { item: 'chronium_suspension' } ],
				outputs: [ { item: 'pulse_energy_matrix', rate: 30 } ],
			},
			{
				name: 'Tuned Quantum Processor (Welder)',
				building: 'welder',
				inputs: [ { item: 'crystallized_diamond_core', rate: 60 }, { item: 'aluminum_coating', rate: 120 } ],
				outputs: [ { item: 'tuned_quantum_processor', rate: 60 } ],
			},
			{
				name: 'Tuned Quantum Processor (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [ { item: 'crystallized_diamond_core', rate: 60 }, { item: 'railway_line', rate: 120 } ],
				outputs: [ { item: 'tuned_quantum_processor', rate: 120 } ],
			},
			{
				name: 'Reinforced Nails (Advanced Furnace)',
				building: 'advanced_furnace',
				inputs: [ { item: 'iron_bar', rate: 60 }, { item: 'coal', rate: 60 } ],
				outputs: [ { item: 'reinforced_nails', rate: 60 } ],
			},
			{
				name: 'Railway Tracks (Manufacturer)',
				building: 'manufacturer',
				inputs: [ { item: 'iron_bar', rate: 120 }, { item: 'stone_block', rate: 60 }, { item: 'wooden_plank', rate: 120 } ],
				outputs: [ { item: 'railway_tracks', rate: 60 } ],
			},
			{
				name: 'Railway Tracks (Manufacturer, Alt)',
				building: 'manufacturer',
				inputs: [ { item: 'copper_bar', rate: 60 }, { item: 'stone', rate: 120 }, { item: 'wooden_plank', rate: 60 } ],
				outputs: [ { item: 'railway_tracks', rate: 30 } ],
			},
			{
				name: 'Railway Line (Manufacturer)',
				building: 'manufacturer',
				inputs: [ { item: 'reinforced_nails', rate: 60 }, { item: 'railway_tracks', rate: 60 }, { item: 'reinforced_concrete', rate: 60 } ],
				outputs: [ { item: 'railway_line', rate: 60 } ],
			},
			{
				name: 'Railway Line (Welder)',
				building: 'welder',
				inputs: [ { item: 'reinforced_nails', rate: 120 }, { item: 'railway_tracks', rate: 60 } ],
				outputs: [ { item: 'railway_line', rate: 120 } ],
			},
			{
				name: 'Iron Bar (Press)',
				building: 'press',
				inputs: [{ item: 'iron', rate: 60 }],
				outputs: [{ item: 'iron_bar', rate: 60 }],
			},
			{
				name: 'Iron Ingot (Furnace)',
				building: 'furnace',
				inputs: [ { item: 'iron', rate: 60 } ],
				outputs: [ { item: 'iron_ingot', rate: 60 } ],
			},
			{
				name: 'Sapphire Conduit (Welder)',
				building: 'welder',
				inputs: [
					{ item: 'sapphire', rate: 120 },
					{ item: 'structural_cable', rate: 60 }
				],
				outputs: [ { item: 'sapphire_conduit', rate: 60 } ],
			},
			{
				name: 'Silicon Diode (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ 
                    { item: 'silicon', rate: 120 }, 
                    { item: 'light_oil' } 
                ],
				outputs: [ { item: 'silicon_diode', rate: 60 } ],
			},
			{
				name: 'Titanium Alloy Plate (Manufacturer)',
				building: 'manufacturer',
				inputs: [ 
                    { item: 'titanium', rate: 120 }, 
                    { item: 'silicon_diode', rate: 60 }, 
                    { item: 'iron_ingot', rate: 60 } 
                ],
				outputs: [ { item: 'titanium_alloy_plate', rate: 120 } ],
			},
            {
				name: 'Astralite Fragment (Cutter)',
				building: 'cutter',
				inputs: [ { item: 'astralite', rate: 120 } ],
				outputs: [ { item: 'astralite_fragment', rate: 60 } ],
			},
			{
				name: 'Astralite Fragment (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [ { item: 'astralite', rate: 60 } ],
				outputs: [ { item: 'astralite_fragment', rate: 60 } ],
			},
			{
				name: 'Astral Reinforcement Panel (Manufacturer, Astralite)',
				building: 'manufacturer',
				inputs: [ 
                    { item: 'quartz_insulated_glass', rate: 60 }, 
                    { item: 'titanium_alloy_plate', rate: 60 }, 
                    { item: 'astralite_fragment', rate: 120 } 
                ],
				outputs: [ { item: 'astral_reinforcement_panel', rate: 60 } ],
			},
			{
				name: 'Wood Board (Press)',
				building: 'press',
				inputs: [ { item: 'wood', rate: 60 } ],
				outputs: [ { item: 'wood_board', rate: 60 } ],
			},
			{
				name: 'Astral Reinforcement Panel (Manufacturer, Wood)',
				building: 'manufacturer',
				inputs: [ 
                    { item: 'quartz_insulated_glass', rate: 60 }, 
                    { item: 'titanium_alloy_plate', rate: 60 }, 
                    { item: 'wood_board', rate: 120 } 
                ],
				outputs: [ { item: 'astral_reinforcement_panel', rate: 60 } ],
			},
            {
		        name: 'Uranium Suspension (Dissolution Chamber)',
		        building: 'dissolution_chamber',
		        inputs: [ { item: 'uranium_ion_cell', rate: 20 } ],
		        outputs: [ { item: 'uranium_suspension'} ],
            },
	        {
		        name: 'Refined Uranium Rod (Storage Packing)',
		        building: 'storage_packing',
		        inputs: [ 
                    { item: 'uranium', rate: 120 }, 
                    { item: 'uranium_suspension'} 
                ],
		        outputs: [ { item: 'refined_uranium_rod', rate: 60 } ],
	        },
            {
                name: 'Refined Uranium Rod (Dissolution Chamber)',
                building: 'dissolution_chamber',
                inputs: [ 
                    { item: 'uranium', rate: 120 }, 
                    { item: 'uranium_suspension'} 
                ],
                outputs: [ { item: 'refined_uranium_rod', rate: 30 } ],
            },
            {
                name: 'Titanium Mesh (Advanced Press)',
                building: 'advanced_press',
                inputs: [ 
                    { item: 'titanium', rate: 60 }, 
                    { item: 'aluminum', rate: 60 } 
                ],
                outputs: [ { item: 'titanium_mesh', rate: 30 } ],
            },
            {
                name: 'Titanium Mesh (Advanced Furnace)',
                building: 'advanced_furnace',
                inputs: [ 
                    { item: 'titanium', rate: 120 }, 
                    { item: 'aluminum', rate: 120 } 
                ],
                outputs: [ { item: 'titanium_mesh', rate: 60 } ],
            },
            {
		        name: "Fractured Singularity Mesh (Manufacturer)",
		        building: "manufacturer",
		        inputs: [
			        { item: "singularity_infused_actuator", rate: 60 },
			        { item: "voidglass_focusing_array", rate: 120 },
			        { item: "lattice_encoded_memory_bank", rate: 60 }
		        ],
		        outputs: [
			        { item: 'fractured_singularity_mesh', rate: 60 }
		    ]
	        },
            {
                name: 'Singularity-Infused Actuator (Manufacturer)',
                building: 'manufacturer',
                inputs: [ 
                    { item: 'automated_singularity_converter', rate: 120 }, 
                    { item: 'refined_uranium_rod', rate: 60 }, 
                    { item: 'titanium_mesh', rate: 240 } 
                ],
                outputs: [ { item: 'singularity_infused_actuator', rate: 60 } ],
            },
            {
                name: 'Quartz Insulated Glass (Furnace)',
                building: 'furnace',
                inputs: [ { item: 'quartz', rate: 60 } ],
                outputs: [ { item: 'quartz_insulated_glass', rate: 30 } ],
            },
            {
                name: 'Photonic Diamond Layer (Press)',
                building: 'press',
                inputs: [ { item: 'diamond', rate: 60 } ],
                outputs: [ { item: 'photonic_diamond_layer', rate: 120 } ],
            },
			{
				name: 'Copper Pipe (Cutter)',
				building: 'cutter',
				inputs: [{ item: 'copper', rate: 60 }],
				outputs: [{ item: 'copper_pipe', rate: 120 }],
			},
			{
				name: 'Wood to Coal (Furnace)',
				building: 'furnace',
				inputs: [{ item: 'wood', rate: 60 }],
				outputs: [{ item: 'coal', rate: 60 }],
			},
			{
				name: 'Wood to Wooden Plank (Cutter)',
				building: 'cutter',
				inputs: [{ item: 'wood', rate: 60 }],
				outputs: [{ item: 'wooden_plank', rate: 60 }],
			},
			{
				name: 'Wood to Wooden Plank (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [{ item: 'wood', rate: 60 }],
				outputs: [{ item: 'wooden_plank', rate: 120 }],
			},
			{
				name: 'Wooden Plank to Coal (Furnace)',
				building: 'furnace',
				inputs: [{ item: 'wooden_plank', rate: 60 }],
				outputs: [{ item: 'coal', rate: 120 }],
			},
			{
				name: 'Steel (Welder)',
				building: 'welder',
				inputs: [
					{ item: 'coal', rate: 60 },
					{ item: 'iron', rate: 120 }
				],
				outputs: [{ item: 'steel', rate: 60 }],
			},
			{
				name: 'Steel (Advanced Furnace)',
				building: 'advanced_furnace',
				inputs: [
					{ item: 'coal', rate: 60 },
					{ item: 'iron', rate: 60 }
				],
				outputs: [{ item: 'steel', rate: 120 }],
			},
			{
				name: 'Steel Sheet (Cutter)',
				building: 'cutter',
				inputs: [{ item: 'steel', rate: 60 }],
				outputs: [{ item: 'steel_sheet', rate: 120 }],
			},
			{
				name: 'Quantum Core Singularity (Manufacturer)',
				building: 'manufacturer',
				inputs: [
					{ item: 'copper_pipe', rate: 60 },
					{ item: 'steel_sheet', rate: 60 }
				],
				outputs: [{ item: 'quantum_core_singularity', rate: 60 }],
			},
			{
				name: 'Copper Filament (Furnace)',
				building: 'furnace',
				inputs: [{ item: 'copper', rate: 60 }],
				outputs: [{ item: 'copper_filament', rate: 120 }],
			},
			{
				name: 'Reinforced Steel Plate (Furnace)',
				building: 'furnace',
				inputs: [{ item: 'steel', rate: 60 }],
				outputs: [{ item: 'reinforced_steel_plate', rate: 60 }],
			},
			{
				name: 'Structural Cable (Welder)',
				building: 'welder',
				inputs: [
					{ item: 'copper_filament', rate: 120 },
					{ item: 'reinforced_steel_plate', rate: 60 }
				],
				outputs: [{ item: 'structural_cable', rate: 60 }],
			},
			{
				name: 'Copper Bar (Press)',
				building: 'press',
				inputs: [{ item: 'copper', rate: 60 }],
				outputs: [{ item: 'copper_bar', rate: 60 }],
			},
			{
				name: 'Structural Cable (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'copper_filament', rate: 120 },
					{ item: 'copper_bar', rate: 60 }
				],
				outputs: [{ item: 'structural_cable', rate: 60 }],
			},
			{
				name: 'Power Cable (Furnace)',
				building: 'furnace',
				inputs: [{ item: 'structural_cable', rate: 30 }],
				outputs: [{ item: 'power_cable', rate: 30 }],
			},
			{
				name: 'Power Cable (Advanced Press)',
				building: 'advanced_press',
				inputs: [{ item: 'structural_cable', rate: 60 }],
				outputs: [{ item: 'power_cable', rate: 60 }],
			},
			{
				name: 'Stellar Nexus Singularity (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'power_cable', rate: 120 },
					{ item: 'quantum_core_singularity', rate: 120 }
				],
				outputs: [{ item: 'stellar_nexus_singularity', rate: 120 }],
			},
			{
				name: 'Stone Block (Cutter)',
				building: 'cutter',
				inputs: [{ item: 'stone', rate: 60 }],
				outputs: [{ item: 'stone_block', rate: 60 }],
			},
			{
				name: 'Support Beam (Advanced Press)',
				building: 'advanced_press',
				inputs: [
					{ item: 'iron_pipe', rate: 60 },
					{ item: 'stone_block', rate: 60 }
				],
				outputs: [{ item: 'support_beam', rate: 60 }],
			},
			{
				name: 'Support Beam (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'copper_pipe', rate: 120 },
					{ item: 'stone_block', rate: 120 }
				],
				outputs: [{ item: 'support_beam', rate: 120 }],
			},
			{
				name: 'Stellar Nexus Singularity (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'support_beam', rate: 120 },
					{ item: 'quantum_core_singularity', rate: 120 }
				],
				outputs: [{ item: 'stellar_nexus_singularity', rate: 60 }],
			},
			{
				name: 'Iron Pipe (Cutter)',
				building: 'cutter',
				inputs: [{ item: 'iron', rate: 60 }],
				outputs: [{ item: 'iron_pipe', rate: 120 }],
			},
			{
				name: 'Liquid Chloride (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'chloride' }],
				outputs: [{ item: 'liquid_chloride' }],
			},
			{
				name: 'Aluminum Coating (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'aluminum_ingot', rate: 60 },
					{ item: 'aluminum_bar', rate: 60 },
					{ item: 'liquid_chloride' }
				],
				outputs: [{ item: 'aluminum_coating', rate: 60 }],
			},
			{
				name: 'Advanced Solar Module (Manufacturer)',
				building: 'manufacturer',
				inputs: [
					{ item: 'solar_cell', rate: 60 },
					{ item: 'aluminum_frame', rate: 60 },
					{ item: 'aluminum_coating', rate: 120 }
				],
				outputs: [{ item: 'advanced_solar_module', rate: 60 }],
			},
			{
				name: 'Automated Singularity Converter (Manufacturer)',
				building: 'manufacturer',
				inputs: [
					{ item: 'advanced_solar_module', rate: 60 },
					{ item: 'sapphire_energy_cell', rate: 60 },
					{ item: 'cosmic_singularity', rate: 60 }
				],
				outputs: [{ item: 'automated_singularity_converter', rate: 60 }],
			},
			{
				name: 'Sapphire Energy Cell (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'sapphire', rate: 60 },
					{ item: 'refined_ether_quartz', rate: 60 }
				],
				outputs: [{ item: 'sapphire_energy_cell', rate: 30 }],
			},
			{
				name: 'Polycrystalline Silicon (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'silicon', rate: 120 },
					{ item: 'liquid_deuterium' }
				],
				outputs: [{ item: 'polycrystalline_silicon', rate: 60 }],
			},
			{
				name: 'Heavy Oil & Light Oil (Distilation Column)',
				building: 'distilation_column',
				inputs: [{ item: 'oil' }],
				outputs: [
					{ item: 'heavy_oil' },
					{ item: 'light_oil' }
				],
			},
			{
				name: 'Polycrystalline Silicon (Dissolution Chamber, Alt)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'silicon', rate: 120 },
					{ item: 'heavy_oil' }
				],
				outputs: [{ item: 'polycrystalline_silicon', rate: 60 }],
			},
			{
				name: 'Solar Cell (Manufacturer)',
				building: 'manufacturer',
				inputs: [
					{ item: 'polycrystalline_silicon', rate: 60 },
					{ item: 'aluminum_ingot', rate: 120 },
					{ item: 'aluminum_bar', rate: 60 }
				],
				outputs: [{ item: 'solar_cell', rate: 60 }],
			},
			{
				name: 'Solar Cell (Welder)',
				building: 'welder',
				inputs: [
					{ item: 'polycrystalline_silicon', rate: 60 },
					{ item: 'aluminum_profile', rate: 120 }
				],
				outputs: [{ item: 'solar_cell', rate: 60 }],
			},
			{
				name: 'Refined Ether Quartz (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'ether_quartz', rate: 60 },
					{ item: 'liquid_oxygen' }
				],
				outputs: [{ item: 'refined_ether_quartz', rate: 60 }],
			},
			{
				name: 'Liquid Nitrogen (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'nitrogen' }],
				outputs: [{ item: 'liquid_nitrogen' }],
			},
			{
				name: 'Refined Ether Quartz (Dissolution Chamber, Alt 1)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'ether_quartz', rate: 60 },
					{ item: 'liquid_nitrogen' }
				],
				outputs: [{ item: 'refined_ether_quartz', rate: 60 }],
			},
			{
				name: 'Brine (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'salt', rate: 60 },
					{ item: 'water' }
				],
				outputs: [{ item: 'brine' }],
			},
			{
				name: 'Sodium & Chloride (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'brine' }],
				outputs: [
					{ item: 'sodium' },
					{ item: 'chloride' }
				],
			},
			{
				name: 'Refined Ether Quartz (Dissolution Chamber, Alt 2)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'ether_quartz', rate: 60 },
					{ item: 'sodium' }
				],
				outputs: [{ item: 'refined_ether_quartz', rate: 60 }],
			},
			{
				name: 'Aluminum Ingot (Furnace)',
				building: 'furnace',
				inputs: [{ item: 'aluminum', rate: 60 }],
				outputs: [{ item: 'aluminum_ingot', rate: 60 }],
			},
			{
				name: 'Aluminum Bar (Press)',
				building: 'press',
				inputs: [{ item: 'aluminum', rate: 60 }],
				outputs: [{ item: 'aluminum_bar', rate: 120 }],
			},
			{
				name: 'Aluminum Profile (Cutter)',
				building: 'cutter',
				inputs: [{ item: 'aluminum', rate: 120 }],
				outputs: [{ item: 'aluminum_profile', rate: 60 }],
			},
			{
				name: 'Aluminum Profile (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [{ item: 'aluminum', rate: 60 }],
				outputs: [{ item: 'aluminum_profile', rate: 60 }],
			},
			{
				name: 'Aluminum Frame (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [
					{ item: 'aluminum_profile', rate: 60 },
					{ item: 'aluminum_bar', rate: 30 },
					{ item: 'sulfuric_acid' }
				],
				outputs: [{ item: 'aluminum_frame', rate: 30 }],
			},
			{
				name: 'Aluminum Frame (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'aluminum_profile', rate: 120 },
					{ item: 'aluminum_bar', rate: 120 }
				],
				outputs: [{ item: 'aluminum_frame', rate: 60 }],
			},
			{
				name: 'Aluminum Coating (Welder)',
				building: 'welder',
				inputs: [
					{ item: 'aluminum_ingot', rate: 30 },
					{ item: 'aluminum_bar', rate: 30 }
				],
				outputs: [{ item: 'aluminum_coating', rate: 30 }],
			},
			{
				name: 'Liquid Oxygen (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'oxygen' }],
				outputs: [{ item: 'liquid_oxygen' }],
			},
			{
				name: 'Deuterium (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'heavy_water' }],
				outputs: [{ item: 'deuterium' }],
			},
			{
				name: 'Liquid Deuterium (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'deuterium' }],
				outputs: [{ item: 'liquid_deuterium' }],
			},
			{
				name: 'Sulfur Dioxide (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [{ item: 'sulfur', rate: 60 }],
				outputs: [{ item: 'sulfur_dioxide' }],
			},
			{
				name: 'Water Steam (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [{ item: 'water' }],
				outputs: [{ item: 'water_steam' }],
			},
			{
				name: 'Sulfur Trioxide (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [
					{ item: 'sulfur_dioxide' },
					{ item: 'water_steam' }
				],
				outputs: [{ item: 'sulfur_trioxide' }],
			},
			{
				name: 'Sulfuric Acid (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [
					{ item: 'sulfur_trioxide' },
					{ item: 'water_steam' }
				],
				outputs: [{ item: 'sulfuric_acid' }],
			},
			{
				name: 'LV Transformer (Manufacturer)',
				building: 'manufacturer',
				inputs: [
					{ item: 'power_cable', rate: 120 },
					{ item: 'steel_sheet', rate: 120 },
					{ item: 'reinforced_steel_plate', rate: 60 }
				],
				outputs: [{ item: 'lv_transformer', rate: 60 }],
			},
			{
				name: 'HV Transformer (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'lv_transformer', rate: 60 },
					{ item: 'copper_bar', rate: 120 }
				],
				outputs: [{ item: 'hv_transformer', rate: 60 }],
			},
			{
				name: 'HV Transformer (Advanced Cutter, Alt)',
				building: 'advanced_cutter',
				inputs: [
					{ item: 'lv_transformer', rate: 30 },
					{ item: 'iron_pipe', rate: 120 }
				],
				outputs: [{ item: 'hv_transformer', rate: 30 }],
			},
			{
				name: 'Cosmic Singularity (Manufacturer)',
				building: 'manufacturer',
				inputs: [
					{ item: 'hv_transformer', rate: 60 },
					{ item: 'stellar_nexus_singularity', rate: 60 }
				],
				outputs: [{ item: 'cosmic_singularity', rate: 60 }],
			},
			{
				name: 'Cosmic Singularity (Manufacturer, Alt)',
				building: 'manufacturer',
				inputs: [
					{ item: 'lv_transformer', rate: 120 },
					{ item: 'stellar_nexus_singularity', rate: 60 }
				],
				outputs: [{ item: 'cosmic_singularity', rate: 60 }],
			},
			{
				name: 'Hydrogen & Oxygen (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'water' }],
				outputs: [
					{ item: 'hydrogen' },
					{ item: 'oxygen' }
				]
			},
			{
				name: 'Ionized Hydrogen (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [{ item: 'hydrogen' }],
				outputs: [{ item: 'ionized_hydrogen' }]
			},
			{
				name: 'Plasma Arc Energy (Bifluxor)',
				building: 'bifluxor',
				inputs: [{ item: 'ionized_hydrogen' }],
				outputs: [{ item: 'plasma_arc_energy' }]
			},
			{
				name: 'Superheated Plasma Core (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [{ item: 'plasma_arc_energy' }],
				outputs: [{ item: 'superheated_plasma_core' }]
			},
			{
				name: 'Uranium Ion Cell (Storage Packing)',
				building: 'storage_packing',
				inputs: [
					{ item: 'uranium', rate: 60 },
					{ item: 'superheated_plasma_core' }
				],
				outputs: [
					{ item: 'uranium_ion_cell', rate: 10 }
				]
			},
			{
				name: 'Liquid Hydrogen (Bifluxor)',
				building: 'bifluxor',
				inputs: [ { item: 'hydrogen' } ],
				outputs: [ { item: 'liquid_hydrogen' } ],
			},
			{
				name: 'Substrate & Ethylene (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'water' }, { item: 'liquid_hydrogen' }, { item: 'biomass', rate: 60 } ],
				outputs: [ { item: 'substrate', rate: 60 }, { item: 'ethylene' } ],
			},
			{
				name: 'Etheric Binder Gel (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'substrate', rate: 60 } ],
				outputs: [ { item: 'etheric_binder_gel' } ],
			},
			{
				name: 'Reinforced Uranium Suspension (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [ { item: 'uranium_suspension' }, { item: 'etheric_binder_gel' } ],
				outputs: [ { item: 'reinforced_uranium_suspension' } ],
			},
			{
				name: 'Voidglass Focusing Array (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'astral_reinforcement_panel', rate: 60 }, { item: 'refined_uranium_rod', rate: 60 }, { item: 'uranium_ion_cell', rate: 60 }, { item: 'reinforced_uranium_suspension' } ],
				outputs: [ { item: 'voidglass_focusing_array', rate: 120 } ],
			},
			{
				name: 'Voidglass Focusing Array (Dissolution Chamber, Alt)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'astral_reinforcement_panel', rate: 60 }, { item: 'refined_uranium_rod', rate: 60 }, { item: 'photonic_memory_core', rate: 60 } ],
				outputs: [ { item: 'voidglass_focusing_array', rate: 60 } ],
			},
			{
				name: 'Iridium-Plated Cable (Manufacturer)',
				building: 'manufacturer',
				inputs: [ { item: 'iridium', rate: 60 }, { item: 'power_cable', rate: 30 } ],
				outputs: [ { item: 'iridium_plated_cable', rate: 30 } ],
			},
			{
				name: 'Iridium-Plated Cable (Manufacturer, Alt)',
				building: 'manufacturer',
				inputs: [ { item: 'iridium', rate: 60 }, { item: 'structural_cable', rate: 120 } ],
				outputs: [ { item: 'iridium_plated_cable', rate: 120 } ],
			},
			{
				name: 'Diamond Dust (Cutter)',
				building: 'cutter',
				inputs: [ { item: 'diamond', rate: 120 } ],
				outputs: [ { item: 'diamond_dust', rate: 30 } ],
			},
			{
				name: 'Diamond Dust (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [ { item: 'diamond', rate: 120 } ],
				outputs: [ { item: 'diamond_dust', rate: 60 } ],
			},
			{
				name: 'Titanium Lattice (Welder)',
				building: 'welder',
				inputs: [ { item: 'titanium', rate: 30 }, { item: 'diamond_dust', rate: 30 } ],
				outputs: [ { item: 'titanium_lattice', rate: 60 } ],
			},
			{
				name: 'Crystallized Diamond Core (Furnace)',
				building: 'furnace',
				inputs: [ { item: 'diamond', rate: 60 } ],
				outputs: [ { item: 'crystallized_diamond_core', rate: 30 } ],
			},
			{
				name: 'Titanium Lattice (Welder, Alt)',
				building: 'welder',
				inputs: [ { item: 'titanium', rate: 30 }, { item: 'crystallized_diamond_core', rate: 30 } ],
				outputs: [ { item: 'titanium_lattice', rate: 120 } ],
			},
			{
				name: 'Lattice Reinforced Conduit (Welder)',
				building: 'welder',
				inputs: [ { item: 'iridium_plated_cable', rate: 60 }, { item: 'titanium_lattice', rate: 60 } ],
				outputs: [ { item: 'lattice_reinforced_conduit', rate: 60 } ],
			},
			{
				name: 'Lattice Encoded Memory Bank (Advanced Press)',
				building: 'advanced_press',
				inputs: [ { item: 'lattice_reinforced_conduit', rate: 120 }, { item: 'photonic_diamond_layer', rate: 60 } ],
				outputs: [ { item: 'lattice_encoded_memory_bank', rate: 60} ],
			},
            {
				name: 'Photonic Memory Core (Welder)',
				building: 'welder',
				inputs: [ { item: 'photonic_diamond_layer', rate: 30 }, { item: 'chronium_crystal', rate: 15 } ],
				outputs: [ { item: 'photonic_memory_core', rate: 15 } ],
			},
			{
				name: 'Diamond Slurry (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'diamond', rate: 60 } ],
				outputs: [ { item: 'diamond_slurry' } ],
			},
			{
				name: 'Chronium Suspension (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'chronium_crystal', rate: 60 } ],
				outputs: [ { item: 'chronium_suspension' } ],
			},
			{
				name: 'Iridium Solution (Dissolution Chamber)',
				building: 'dissolution_chamber',
				inputs: [ { item: 'iridium', rate: 60 } ],
				outputs: [ { item: 'iridium_solution' } ],
			},
			{
				name: 'Temporal Circuit Slurry (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [ { item: 'diamond_slurry' }, { item: 'chronium_suspension' } ],
				outputs: [ { item: 'temporal_circuit_slurry' } ],
			},
			{
				name: 'Stabilized Iridium Matrix (Distilation Column)',
				building: 'distilation_column',
				inputs: [ { item: 'iridium_solution' } ],
				outputs: [ { item: 'stabilized_iridium_matrix' } ],
			},
			{
				name: 'Chrono Catalyst Gel (Chemical Infuser)',
				building: 'chemical_infuser',
				inputs: [ { item: 'stabilized_iridium_matrix' }, { item: 'temporal_circuit_slurry' } ],
				outputs: [ { item: 'chrono_catalyst_gel' } ],
			},
			{
				name: 'Photonic Memory Core (Storage Packing)',
				building: 'storage_packing',
				inputs: [ { item: 'photonic_diamond_layer', rate: 120 }, { item: 'chrono_catalyst_gel' } ],
				outputs: [ { item: 'photonic_memory_core', rate: 60 } ],
			},
			{
				name: 'Ruby Lens (Advanced Cutter)',
				building: 'advanced_cutter',
				inputs: [ { item: 'ruby', rate: 60 } ],
				outputs: [ { item: 'ruby_lens', rate: 30 } ],
			},
			{
				name: 'Ruby Lens (Cutter)',
				building: 'cutter',
				inputs: [ { item: 'ruby', rate: 120 } ],
				outputs: [ { item: 'ruby_lens', rate: 30 } ],
			},
			{
				name: 'Tri-Crystal Fusion Node (Manufacturer)',
				building: 'manufacturer',
				inputs: [ { item: 'refined_ether_quartz', rate: 120 }, { item: 'sapphire_energy_cell', rate: 60 }, { item: 'ruby_lens', rate: 120 } ],
				outputs: [ { item: 'tri_crystal_fusion_node', rate: 60 } ],
			},
			{
				name: 'Quantum Data Compressor (Advanced Cutter, Alt)',
				building: 'advanced_cutter',
				inputs: [ { item: 'tri_crystal_fusion_node', rate: 60 }, { item: 'phase_synced_relay_circuit', rate: 60 } ],
				outputs: [ { item: 'quantum_data_compressor', rate: 120 } ],
			},
			{
				name: 'Phase-Synced Relay Circuit (advanced furnace)',
				building: 'advanced_furnace',
				inputs: [ { item: 'ruby_circuit_inlay', rate: 120 }, { item: 'polycrystalline_silicon', rate: 240 } ],
				outputs: [ { item: 'osmium_reinforcement', rate: 240 } ],
			},
			{
				name: 'Phase-Synced Relay Circuit (advanced furnace)',
				building: 'advanced_furnace',
				inputs: [ { item: 'ruby', rate: 60 }],
				outputs: [ { item: 'ruby_circuit_inlay', rate: 60 } ],
			},
		
		];

		// Populate item dropdown
		const itemSelect = document.getElementById('item-select');
		const rateInput = document.getElementById('rate-input');
		Object.entries(items).forEach(([key, item]) => {
			const opt = document.createElement('option');
			opt.value = key;
			opt.textContent = item.name;
			itemSelect.appendChild(opt);
		});

				// Modal logic for available items
						let availableItemsList = [];
						// Load from localStorage if present
						try {
							const saved = localStorage.getItem('availableItemsList');
							if (saved) {
								availableItemsList = JSON.parse(saved);
							}
						} catch(e) {}
				const modal = document.getElementById('available-items-modal');
				const openModalBtn = document.getElementById('edit-available-items-btn');
				const closeModalBtn = document.getElementById('close-available-items-modal');
				const addRowBtn = document.getElementById('add-available-item-row');
				const tableBody = document.querySelector('#available-items-table tbody');
				const form = document.getElementById('available-items-form');

				function renderAvailableItemsTable() {
					// Combine duplicate items (solids only, sum amounts)
					const combined = [];
					for (const row of availableItemsList) {
						const type = items[row.item]?.type;
						if (type === 'nonsolid') {
							if (!combined.some(r => r.item === row.item)) {
								combined.push({ item: row.item });
							}
						} else {
							const existing = combined.find(r => r.item === row.item);
							if (existing) {
								existing.amount = (existing.amount || 0) + (row.amount || 0);
							} else {
								combined.push({ item: row.item, amount: row.amount });
							}
						}
					}
					// Replace availableItemsList with combined
					availableItemsList = combined;
					tableBody.innerHTML = '';
					availableItemsList.forEach((row, idx) => {
						const type = items[row.item]?.type;
						const tr = document.createElement('tr');
						tr.innerHTML = `
							<td><select><option value=""${!row.item?' selected':''}>Select item</option>${Object.entries(items).map(([k, i]) => `<option value="${k}"${row.item===k?' selected':''}>${i.name}</option>`).join('')}</select></td>
							<td>${type === 'nonsolid' ? '<span style="color:#888;">N/A</span>' : `<input type="number" min="0" step="1" value="${row.amount ?? ''}" style="width:80px;">`}</td>
							<td><button type="button" data-row="${idx}" class="remove-available-item-row">Remove</button></td>
						`;
						tableBody.appendChild(tr);
					});
				}

						openModalBtn.addEventListener('click', () => {
							if (availableItemsList.length === 0) {
								availableItemsList.push({ item: Object.keys(items)[0], amount: 1 });
							}
							renderAvailableItemsTable();
							modal.style.display = 'flex';
						});
				closeModalBtn.addEventListener('click', () => {
					modal.style.display = 'none';
				});
				addRowBtn.addEventListener('click', () => {
					// Add a new row with no item selected (forces 'Select item' in the dropdown)
					availableItemsList.push({ item: '', amount: 1 });
					renderAvailableItemsTable();
				});
				tableBody.addEventListener('click', (e) => {
					if (e.target.classList.contains('remove-available-item-row')) {
						const idx = parseInt(e.target.getAttribute('data-row'));
						availableItemsList.splice(idx, 1);
						renderAvailableItemsTable();
					}
				});
				tableBody.addEventListener('change', (e) => {
					const tr = e.target.closest('tr');
					const idx = Array.from(tableBody.children).indexOf(tr);
					if (e.target.tagName === 'SELECT') {
						availableItemsList[idx].item = e.target.value;
						// If new item is nonsolid, clear amount
						if (items[e.target.value]?.type === 'nonsolid') {
							availableItemsList[idx].amount = null;
						}
						renderAvailableItemsTable();
					} else if (e.target.tagName === 'INPUT') {
						// Only allow input for solids
						if (items[availableItemsList[idx].item]?.type !== 'nonsolid') {
							availableItemsList[idx].amount = parseInt(e.target.value) || 0;
						}
					}
				});
						form.addEventListener('submit', (e) => {
							e.preventDefault();
					// Save to localStorage, but remove amount for nonsolids
							try {
								const filtered = availableItemsList.map(row => {
									const type = items[row.item]?.type;
							return type === 'nonsolid' ? { item: row.item } : row;
								});
								localStorage.setItem('availableItemsList', JSON.stringify(filtered));
							} catch(e) {}
							modal.style.display = 'none';
						});

		// Disable rate input for nonsolid
		itemSelect.addEventListener('change', function() {
			const selectedType = items[this.value]?.type;
			if (selectedType === 'nonsolid') {
				rateInput.value = '';
				rateInput.disabled = true;
				rateInput.placeholder = 'No rate needed';
			} else {
				rateInput.disabled = false;
				rateInput.placeholder = 'Rate per minute';
			}
		});


		// --- Basic calculation and display logic ---
		document.getElementById('calculate-btn').addEventListener('click', () => {
			const selectedItem = itemSelect.value;
			const selectedType = items[selectedItem]?.type;
			let rate = 1;
			if (selectedType !== 'nonsolid') {
				rate = parseFloat(rateInput.value);
			}
			const planDiv = document.getElementById('production-plan');
			const optimizeBy = document.getElementById('optimize-select').value;
			// Get available items and amounts from modal
			const availableItems = availableItemsList.map(row => row.item);
			const availableAmounts = {};
			availableItemsList.forEach(row => { availableAmounts[row.item] = row.amount; });
			if (!selectedItem || (selectedType !== 'nonsolid' && (isNaN(rate) || rate <= 0))) {
				planDiv.innerHTML = '<div class="placeholder-graph">Please select an item and enter a valid rate.</div>';
				return;
			}
			// For nonsolid, set rate to 1 (arbitrary, since rate is not needed)
			if (selectedType === 'nonsolid') {
				rate = 1;
			}

			// Helper: get all recipes for an item
			function getRecipesForItem(itemKey) {
				return recipes.filter(r => r.outputs.some(o => o.item === itemKey));
			}


			// Helper: combinatorial optimizer for recipe splitting
			// Integer building counts, pool excess for reuse
			// Brute-force optimizer: test all combinations of normal/overclocked for all recipes, select lowest metric
			function optimizeRecipes(itemKey, requiredRate, excessPool = {}) {
				const all = getRecipesForItem(itemKey);
				if (all.length === 0) return null;
				// Use excess if available
				let needed = requiredRate;
				if (excessPool[itemKey]) {
					if (excessPool[itemKey] >= needed) {
						excessPool[itemKey] -= needed;
						return [];
					} else {
						needed -= excessPool[itemKey];
						excessPool[itemKey] = 0;
					}
				}
				// Build all recipe variants (normal/overclocked)
				let variants = [];
				for (const r of all) {
					const output = r.outputs.find(o => o.item === itemKey);
					const outRate = output && output.rate ? output.rate : 1;
					// Check if all outputs are nonsolid
					const onlyNonsolid = r.outputs.every(o => {
						const t = items[o.item]?.type;
						return t === 'nonsolid';
					});
					variants.push({ recipe: r, outRate, overclocked: false });
					// Prevent overclocking if not enough available items for any input
					let canOverclock = true;
					if (!onlyNonsolid) {
						if (typeof availableAmounts !== 'undefined') {
							for (const input of r.inputs) {
								const inputType = items[input.item]?.type;
								if (inputType !== 'nonsolid' && typeof availableAmounts[input.item] === 'number') {
									// Overclocked input rate is doubled
									const required = (input.rate ?? 1) * 2;
									if (availableAmounts[input.item] < required) {
										canOverclock = false;
										break;
									}
								}
							}
						}
						if (canOverclock) {
							variants.push({ recipe: r, outRate: outRate * 2, overclocked: true });
						}
					}
				}
				// Try all combinations of building counts for each variant (integer, sum >= needed)
				// For N variants, try all combinations of building counts up to a reasonable max
				const maxBuildings = 8; // limit for performance
				let bestPlan = null;
				let bestValue = Infinity;
				let comboCount = 0;
				function* combos(n, total) {
					if (n === 1) {
						yield [total];
						return;
					}
					for (let i = 0; i <= total; ++i) {
						for (const rest of combos(n - 1, total - i)) {
							yield [i, ...rest];
						}
					}
				}
				// Try all combinations of building counts (up to maxBuildings)
				for (let totalBuildings = 1; totalBuildings <= maxBuildings; ++totalBuildings) {
					for (const counts of combos(variants.length, totalBuildings)) {
						comboCount++;
						let produced = 0;
						let plan = [];
						let totalPower = 0, totalSpace = 0, totalBld = 0;
						for (let i = 0; i < variants.length; ++i) {
							if (counts[i] === 0) continue;
							const v = variants[i];
							produced += v.outRate * counts[i];
							const building = buildings[v.recipe.building];
							let space = building.space * counts[i];
							plan.push({ recipe: v.recipe, amount: v.outRate * counts[i], used: 0, overclocked: v.overclocked, buildingCount: counts[i] });
							totalSpace += space;
							totalBld += counts[i];
						}
						if (produced < needed) continue;
						// Assign 'used' for each plan entry
						let remaining = needed;
						for (let p of plan) {
							if (remaining > 0) {
								const use = Math.min(p.amount, remaining);
								p.used = use;
								remaining -= use;
							} else {
								p.used = 0;
							}
						}
						// Compute power based on only the used portion of each building
						for (let p of plan) {
							if (p.used > 0) {
								const building = buildings[p.recipe.building];
								let buildingPower = building.power;
								if (p.overclocked) buildingPower *= 2.5;
								let fraction = p.used / p.amount;
								totalPower += buildingPower * p.buildingCount * fraction;
							}
						}
						// Compute value for metric
						let value = 0;
						if (optimizeBy === 'space') value = totalSpace;
						else if (optimizeBy === 'power') value = totalPower;
						else if (optimizeBy === 'buildings') value = totalBld;

						// Tie-breaking rules (in order):
						// 1) Lower metric value wins
						// 2) If equal, fewer total buildings wins
						// 3) If still equal, fewer overclocked buildings wins (prefer normal operation when possible)
						const candidateBuildings = totalBld;
						const bestBuildings = bestPlan ? bestPlan.reduce((s, p) => s + p.buildingCount, 0) : Infinity;
						const candidateOverclocked = plan.reduce((s, p) => s + (p.overclocked ? p.buildingCount : 0), 0);
						const bestOverclocked = bestPlan ? bestPlan.reduce((s, p) => s + (p.overclocked ? p.buildingCount : 0), 0) : Infinity;

						const isBetter = (
							value < bestValue ||
							(value === bestValue && (
								candidateBuildings < bestBuildings ||
								(candidateBuildings === bestBuildings && candidateOverclocked < bestOverclocked)
							))
						);
						if (isBetter) {
							bestValue = value;
							bestPlan = plan.map(p => ({ ...p }));
						}
					}
				}
				// Pool excess
				if (bestPlan) {
					let produced = bestPlan.reduce((sum, p) => sum + p.amount, 0);
					if (produced > needed) {
						excessPool[itemKey] = (excessPool[itemKey] || 0) + (produced - needed);
					}
					return bestPlan;
				}
				return null;
			}

			// Recursive function to build input tree
			function buildInputTree(itemKey, requiredRate, depth = 0, totals = { power: 0, space: 0, buildings: 0 }, producedNonsolids = {}, excessPool = {}, requirements = {}, fullRequirements = {}) {
				const item = items[itemKey];
				if (!item) {
					console.log(`Unknown item: ${itemKey}`);
					return `<li style='color:#f55;'>Unknown item: <b>${itemKey}</b></li>`;
				}
				const plans = optimizeRecipes(itemKey, requiredRate, excessPool);
				if (!plans) {
					// Only fail if not available and not producible (no recipe)
					if (availableItems.length && !availableItems.includes(itemKey) && getRecipesForItem(itemKey).length === 0) {
						console.log(`Cannot make ${item.name}: not in available items and no recipe.`);
						return `<li style='color:#f55;'>${requiredRate ? requiredRate.toFixed(2) + ' ' : ''}<b>${item.name}</b> (not available and no recipe)</li>`;
					}
					if (typeof availableAmounts[itemKey] !== 'undefined' && requiredRate > availableAmounts[itemKey]) {
						console.log(`Cannot make ${item.name}: need ${requiredRate}, have ${availableAmounts[itemKey]}`);
						return `<li style='color:#f55;'>${requiredRate.toFixed(2)} <b>${item.name}</b> (need ${requiredRate}, have ${availableAmounts[itemKey]})</li>`;
					}
					return `<li>${requiredRate ? requiredRate.toFixed(2) + ' ' : ''}<b>${item.name}</b>${depth === 0 ? ' per minute' : ''}</li>`;
				}
				let html = `<li>`;
				html += `${requiredRate ? requiredRate.toFixed(2) + ' ' : ''}<b>${item.name}</b>${depth === 0 ? ' per minute' : ''}`;
				html += `<ul style=\"margin:0.5rem 0 0 1.5rem;\">`;
				   plans.forEach((plan, i) => {
					   const recipe = plan.recipe;
					   const amount = plan.amount;
					   const used = plan.used;
					   const output = recipe.outputs.find(o => o.item === itemKey);
					   let outRate = output && output.rate ? output.rate : 1;
					   let building = buildings[recipe.building];
					   // Overclocking: handled by optimizer, so plan.overclocked is set if used
					   let isOverclocked = plan.overclocked || false;
					   if (isOverclocked) outRate *= 2;
					   const buildingCount = amount && outRate ? (amount / outRate) : 1;
					   let totalPower = building ? building.power * buildingCount : 0;
					   if (isOverclocked && building) totalPower *= 2.5;
					   const totalSpace = building ? building.space * buildingCount : 0;
					   if (building) {
						   totals.power += totalPower;
						   totals.space += totalSpace;
						   totals.buildings += buildingCount;
					   }
					   html += `<li><b>${buildingCount}</b> x <span>${building ? building.name : 'Unknown Building'}</span> &mdash; <span>Power: <b>${totalPower.toFixed(2)}</b></span>, <span>Space: <b>${totalSpace.toFixed(2)}</b></span> <span style='color:#aaa'>(via ${recipe.name}${plans.length > 1 ? `, ${used.toFixed(2)}/min` : ''}${amount > used ? `, ${amount.toFixed(2)}/min produced` : ''}${isOverclocked ? ', Overclocked' : ''})</span></li>`;
					   recipe.inputs.forEach(input => {
						   const inputType = items[input.item]?.type;
						   const inputHasRecipe = getRecipesForItem(input.item).length > 0;
						   let inputRate = (input.rate ?? 0) * buildingCount;
						   if (isOverclocked) inputRate *= 2;
						   // Always accumulate into full BOM (including intermediates)
						   fullRequirements[input.item] = (fullRequirements[input.item] || 0) + inputRate;
						   if (inputType === 'nonsolid') {
							   if (!producedNonsolids[input.item]) {
								   producedNonsolids[input.item] = true;
								   if (inputHasRecipe) {
									   html += buildInputTree(input.item, inputRate, depth + 1, totals, producedNonsolids, excessPool, requirements, fullRequirements);
								   } else {
									   html += `<li><b>${items[input.item].name}</b></li>`;
									   // Nonsolids without a recipe are externally supplied
									   requirements[input.item] = (requirements[input.item] || 0) + inputRate;
								   }
							   } else {
								   html += `<li><b>${items[input.item].name}</b> (already produced)</li>`;
							   }
						   } else if (inputHasRecipe) {
							   html += buildInputTree(input.item, inputRate, depth + 1, totals, producedNonsolids, excessPool, requirements, fullRequirements);
						   } else {
							   html += `<li>${inputRate.toFixed(2)} <b>${items[input.item].name}</b>${depth === 0 ? ' per minute' : ''}</li>`;
							   // Base item with no recipe: add to requirements
							   requirements[input.item] = (requirements[input.item] || 0) + inputRate;
						   }
					   });
				   });
				html += `</ul></li>`;
				return html;
			}


			// Show the full production tree for the selected item and totals
			function renderTreeAutoOverclock() {
				const totals = { power: 0, space: 0, buildings: 0 };
				const requirements = {};
				const fullRequirements = {};
				const treeHtml = buildInputTree(selectedItem, rate, 0, totals, {}, {}, requirements, fullRequirements);
				// Build a sorted Bill of Materials (base requirements)
				const reqEntries = Object.entries(requirements);
				reqEntries.sort((a, b) => items[a[0]].name.localeCompare(items[b[0]].name));
				const reqListHtml = reqEntries.length
					? `<ul style="margin:0.5rem 0 0 1.5rem;">${reqEntries.map(([key, val]) => `<li>${val.toFixed(2)} <b>${items[key]?.name || key}</b> per minute</li>`).join('')}</ul>`
					: '<div style="color:#888;">No external items required.</div>';
				// Build full Bill of Materials (including intermediates)
				const fullReqEntries = Object.entries(fullRequirements);
				fullReqEntries.sort((a, b) => items[a[0]].name.localeCompare(items[b[0]].name));
				const fullReqListHtml = fullReqEntries.length
					? `<ul style=\"margin:0.5rem 0 0 1.5rem;\">${fullReqEntries.map(([key, val]) => `<li>${val.toFixed(2)} <b>${items[key]?.name || key}</b> per minute</li>`).join('')}</ul>`
					: '<div style=\"color:#888;\">No inputs required.</div>';
				document.getElementById('plan-tree-html').innerHTML = `
					<div style="font-size:1.3rem;margin-bottom:1rem;">
						<b>${rate}</b> <span>${items[selectedItem].name}</span> per minute
					</div>
					<div style="margin-bottom:1rem;font-size:1.1rem;">
						Total Power: <b>${totals.power.toFixed(2)}</b> &nbsp; | &nbsp; Total Space: <b>${totals.space.toFixed(2)}</b> &nbsp; | &nbsp; Total Buildings: <b>${totals.buildings.toFixed(2)}</b>
					</div>
					<div style="margin-bottom:0.5rem;font-size:1.1rem;">
						<b>Required items per minute</b>
					<div style=\"margin-top:1rem;margin-bottom:0.5rem;font-size:1.1rem;\">\n                        <b>Full bill of materials (incl. intermediates)</b>\n                    </div>
					${fullReqListHtml}
					</div>
					${reqListHtml}
					<ul style="margin:0.5rem 0 0 1.5rem;">${treeHtml}</ul>
				`;
			}
			renderTreeAutoOverclock();

			// --- Network Graph Visualization ---
			function buildGraphData(itemKey, requiredRate, nodes = [], edges = [], parentId = null, nodeMap = {}, depth = 0, producedNonsolids = {}, edgeLabels = {}, edgeIndex = {}) {
				const item = items[itemKey];
				const plans = optimizeRecipes(itemKey, requiredRate);
				// Use a composite key to merge like items at the same depth
				const nodeId = itemKey + '_' + depth;
				if (!nodeMap[nodeId]) {
					let nodeObj;
					let showRate = item.type !== 'nonsolid';
					if (item.icon) {
						nodeObj = {
							id: nodeId,
							label: showRate ? `${item.name}\n${requiredRate ? requiredRate.toFixed(2) : ''}${depth === 0 ? ' /min' : ''}` : `${item.name}`,
							shape: 'image',
							image: item.icon,
							color: '#ffb347',
							font: { color: '#fff', size: 18, multi: true },
							rate: requiredRate, count: 1, parents: new Set()
						};
					} else {
						nodeObj = {
							id: nodeId,
							label: showRate ? `${item.name}\n${requiredRate ? requiredRate.toFixed(2) : ''}${depth === 0 ? ' /min' : ''}` : `${item.name}`,
							shape: 'box',
							color: '#ffb347',
							font: { color: '#fff', size: 18, multi: true },
							rate: requiredRate, count: 1, parents: new Set()
						};
					}
					nodeMap[nodeId] = nodeObj;
					nodes.push(nodeObj);
				} else {
					nodeMap[nodeId].rate += requiredRate;
					nodeMap[nodeId].count += 1;
					let showRate = item.type !== 'nonsolid';
					nodeMap[nodeId].label = showRate ? `${item.name}\n${nodeMap[nodeId].rate.toFixed(2)}${depth === 0 ? ' /min' : ''}` : `${item.name}`;
				}
				if (parentId) {
					// Only add unique edges
					if (!nodeMap[nodeId].parents.has(parentId)) {
						edges.push({ from: nodeId, to: parentId, arrows: 'to', color: '#fff', width: 2 });
						nodeMap[nodeId].parents.add(parentId);
					}
				}
				if (!plans) return { nodes, edges };
				plans.forEach((plan, i) => {
					const recipe = plan.recipe;
					const amount = plan.amount;
					const output = recipe.outputs.find(o => o.item === itemKey);
					let outRate = output && output.rate ? output.rate : 1;
					const buildingCount = amount && outRate ? (amount / outRate) : 1;
					recipe.inputs.forEach(input => {
						const inputType = items[input.item]?.type;
						const inputHasRecipe = getRecipesForItem(input.item).length > 0;
						const inputRate = (input.rate ?? 0) * buildingCount;
						const childId = input.item + '_' + (depth + 1);
						if (!nodeMap[childId]) {
							const inputItemObj = items[input.item];
							if (!inputItemObj) {
								console.log(`Unknown item in graph: ${input.item}`);
								nodeMap[childId] = { id: childId, label: `Unknown: ${input.item}\n${inputRate ? inputRate.toFixed(2) : ''}`, shape: 'ellipse', color: '#f55', font: { color: '#23272b', size: 16 }, rate: inputRate, count: 1, parents: new Set() };
								nodes.push(nodeMap[childId]);
							} else {
								let nodeObj;
								let showRate = inputItemObj.type !== 'nonsolid';
								if (inputItemObj.icon) {
									nodeObj = {
										id: childId,
										label: showRate ? `${inputItemObj.name}\n${inputRate ? inputRate.toFixed(2) : ''}${depth === 0 ? ' /min' : ''}` : `${inputItemObj.name}`,
										shape: 'image',
										image: inputItemObj.icon,
										color: inputType === 'nonsolid' ? '#4fc3f7' : '#fff',
										font: { color: '#fff', size: 16, multi: true },
										rate: inputRate, count: 1, parents: new Set()
									};
								} else {
									nodeObj = {
										id: childId,
										label: showRate ? `${inputItemObj.name}\n${inputRate ? inputRate.toFixed(2) : ''}${depth === 0 ? ' /min' : ''}` : `${inputItemObj.name}`,
										shape: 'ellipse',
										color: inputType === 'nonsolid' ? '#4fc3f7' : '#fff',
										font: { color: '#23272b', size: 16, multi: true },
										rate: inputRate, count: 1, parents: new Set()
									};
								}
								nodeMap[childId] = nodeObj;
								nodes.push(nodeObj);
							}
						} else {
							nodeMap[childId].rate += inputRate;
							nodeMap[childId].count += 1;
							// Update label to show combined rate, but hide for nonsolid
							let labelName = nodeMap[childId].label.split('\n')[0];
							let showRate = items[input.item]?.type !== 'nonsolid';
							nodeMap[childId].label = showRate ? `${labelName}\n${nodeMap[childId].rate.toFixed(2)}${depth === 0 ? ' /min' : ''}` : `${labelName}`;
						}
						// Label edges with building used; combine labels if multiple
						const buildingName = buildings[recipe.building]?.name || recipe.building;
						const edgeKey = childId + '->' + nodeId;
						if (!edgeLabels[edgeKey]) edgeLabels[edgeKey] = new Set();
						edgeLabels[edgeKey].add(buildingName);
						// Only add unique edges; otherwise update the label
						if (!nodeMap[childId].parents.has(nodeId)) {
							const labelText = Array.from(edgeLabels[edgeKey]).join(', ');
							edges.push({ from: childId, to: nodeId, arrows: 'to', color: '#aaa', width: 1.5, label: labelText, font: { color: '#ffb347', size: 12, strokeWidth: 0 } });
							edgeIndex[edgeKey] = edges.length - 1;
							nodeMap[childId].parents.add(nodeId);
						} else {
							const idx = edgeIndex[edgeKey];
							if (typeof idx === 'number' && edges[idx]) {
								edges[idx].label = Array.from(edgeLabels[edgeKey]).join(', ');
							}
						}
						if (inputType === 'nonsolid') {
							if (!producedNonsolids[input.item]) {
								producedNonsolids[input.item] = true;
								if (inputHasRecipe) {
									buildGraphData(input.item, inputRate, nodes, edges, childId, nodeMap, depth + 1, producedNonsolids, edgeLabels, edgeIndex);
								}
							}
						} else if (inputHasRecipe) {
							buildGraphData(input.item, inputRate, nodes, edges, childId, nodeMap, depth + 1, producedNonsolids, edgeLabels, edgeIndex);
						}
					});
				});
				return { nodes, edges };
			}

			// Render the network graph
			const graphDiv = document.getElementById('network-graph');
			if (graphDiv) {
				graphDiv.innerHTML = '';
				const data = buildGraphData(selectedItem, rate, [], [], null, {}, 0, {}, {}, {});
				if (data && data.nodes.length > 0) {
					// Remove .parents property from nodes for vis-network
					data.nodes.forEach(n => { if (n.parents) delete n.parents; });
					const network = new vis.Network(graphDiv, data, {
						nodes: {
							borderWidth: 2,
							shadow: true,
							shape: 'box',
							color: { background: '#ffb347', border: '#23272b', highlight: { background: '#ffd580', border: '#23272b' } },
							font: { color: '#23272b', size: 18, face: 'Roboto' },
							margin: 12
						},
						edges: {
							color: { color: '#aaa', highlight: '#ffb347', hover: '#ffb347' },
							arrows: 'to',
							smooth: { type: 'cubicBezier', forceDirection: 'vertical', roundness: 0.3 },
							width: 1.5
						},
						layout: {
							hierarchical: {
								direction: 'UD',
								sortMethod: 'directed',
								nodeSpacing: 220,
								levelSeparation: 140,
								treeSpacing: 320,
								parentCentralization: true
							}
						},
						physics: false,
						interaction: {
							hover: true,
							tooltipDelay: 100,
							navigationButtons: true,
							keyboard: true
						}
					});

					// Highlight connected nodes on select
					network.on('selectNode', function(params) {
						const selected = params.nodes[0];
						const connectedNodes = network.getConnectedNodes(selected);
						network.selectNodes([selected, ...connectedNodes]);
						// Optionally, highlight edges too
						const connectedEdges = network.getConnectedEdges(selected);
						network.setSelection({ nodes: [selected, ...connectedNodes], edges: connectedEdges });
					});
					network.on('deselectNode', function() {
						network.unselectAll();
					});
				} else {
					graphDiv.innerHTML = '<div style="color:#888;text-align:center;margin-top:2rem;">No graph data available.</div>';
				}
			}
		});
		</script>
	</div>
</body>
</html>
